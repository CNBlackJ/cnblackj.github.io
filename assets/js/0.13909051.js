(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(n,e,t){n.exports=t.p+"assets/img/domain_config.900b6bd1.jpeg"},51:function(n,e,t){n.exports=t.p+"assets/img/port_config.9740970f.jpeg"},54:function(n,e,t){"use strict";t.r(e);var o=[function(){var n=this,e=n.$createElement,o=n._self._c||e;return o("div",{staticClass:"content"},[o("h1",{attrs:{id:"阿里云centos7-4安装mongodb-node-js-git-nginx"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#阿里云centos7-4安装mongodb-node-js-git-nginx","aria-hidden":"true"}},[n._v("#")]),n._v(" 阿里云Centos7.4安装Mongodb / Node.js / Git / Nginx")]),o("p",[n._v("每次新开一台机器部署nodejs项目都会重复这样的部署操作，在这里简单记录一下，方便查阅。")]),o("h2",{attrs:{id:"安装mongodb"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#安装mongodb","aria-hidden":"true"}},[n._v("#")]),n._v(" 安装mongodb")]),o("p",[n._v("主要参照官方提供的"),o("a",{attrs:{href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Installation")]),n._v("就可以了，这里简单的记录下过程。")]),o("ul",[o("li",[n._v("创建资源管理文件")])]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[n._v("  # 文件：/etc/yum.repos.d/mongodb-org-4.0.repo \n\n  # 内容：\n  [mongodb-org-4.0]\n  name=MongoDB Repository\n  baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/4.0/x86_64/\n  gpgcheck=1\n  enabled=1\n  gpgkey=https://www.mongodb.org/static/pgp/server-4.0.asc\n")])]),o("ul",[o("li",[n._v("更新一下yum资源")])]),o("p",[o("code",[n._v("$ sudo yum update -y")])]),o("ul",[o("li",[n._v("安装mongodb")])]),o("p",[o("code",[n._v("$ sudo yum install -y mongodb-org")])]),o("ul",[o("li",[n._v("启动mongo服务")])]),o("p",[o("code",[n._v("$ service mongod restart")])]),o("ul",[o("li",[n._v("检查是否成功运行")])]),o("p",[o("code",[n._v("$ mongd")])]),o("p",[n._v("成功显示连接成功的信息即表示安装启动成功了.")]),o("ul",[o("li",[o("p",[n._v("配置外网可访问mongodb")]),o("ul",[o("li",[o("p",[n._v("mongodb默认端口是27017，需要到阿里云管理后台里面的安全组管理，添加一个安全组规则，端口为：27017\n"),o("img",{attrs:{src:t(51),alt:"port_config"}})])]),o("li",[o("p",[n._v("登陆到服务器修改mongo的配置\n"),o("code",[n._v("$ vim /etc/mongod.conf")])])]),o("li",[o("p",[n._v("找到bindIp")])])]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[n._v("# 找到如下内容，修改bindIp\n...\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n...\n⬇️\n#这是更改后的\n...\nnet:\n  port: 27017\n  bindIp: ::,0.0.0.0\n...\n")])]),o("ul",[o("li",[n._v("修改成功后，重新启动mongod")])]),o("p",[o("code",[n._v("$ service mongod restart")])]),o("ul",[o("li",[n._v("验证是否成功\n回到自己的机器，用客户端或者mong连接命令进行连接，注意，这个时候的mongo是没有账户名和密码的，"),o("a",{attrs:{href:"#"}},[n._v("如何配置账户名密码")]),n._v("后续添加。")])]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[n._v("# 所以不需要用户名和密码既可以登陆\n$ mongo yourserverip:27017\n")])]),o("p",[n._v("成功显示连接的信息即配置外网访问成功。")])])]),o("h2",{attrs:{id:"安装nodejs"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#安装nodejs","aria-hidden":"true"}},[n._v("#")]),n._v(" 安装nodejs")]),o("p",[n._v("nodejs版本更新很快，有时候会存在同时使用多个版本的情况，所以可以用"),o("a",{attrs:{href:"https://github.com/creationix/nvm",target:"_blank",rel:"noopener noreferrer"}},[n._v("nvm")]),n._v("来管理安装nodejs，方便在需要的时候切换版本。")]),o("ul",[o("li",[n._v("安装脚本")])]),o("p",[o("code",[n._v("$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash")])]),o("ul",[o("li",[n._v("更新一下source文件")])]),o("p",[o("code",[n._v("$ source ~/.bashrc")])]),o("ul",[o("li",[n._v("检查是否安装成功")])]),o("p",[o("code",[n._v("$ nvm")])]),o("p",[n._v("成功显示help命令信息则安装成功，若失败参考"),o("a",{attrs:{href:"https://github.com/creationix/nvm#install-script",target:"_blank",rel:"noopener noreferrer"}},[n._v("官方安装问题解析")]),n._v(".")]),o("ul",[o("li",[o("p",[n._v("nvm安装成功之后就可以安装任意版本的nodejs了")]),o("ul",[o("li",[n._v("安装最新版nodejs\n"),o("code",[n._v("$ nvm install node")])]),o("li",[n._v("安装指定版本，如8.4.0\n"),o("code",[n._v("$ nvm install 8.4.0")])])])]),o("li",[o("p",[n._v("检查node是否安装成功")])])]),o("p",[o("code",[n._v("$ node -v")]),n._v("\n成功输出版本信息即安装成功。")]),o("h2",{attrs:{id:"安装git"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#安装git","aria-hidden":"true"}},[n._v("#")]),n._v(" 安装Git")]),o("p",[n._v("同样可以参考官方"),o("a",{attrs:{href:"https://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git",target:"_blank",rel:"noopener noreferrer"}},[n._v("installation")]),n._v("的安装教程，这个是有中文的，一步一步安装即可，这里简单总结一下。")]),o("ul",[o("li",[n._v("使用yum安装")])]),o("p",[o("code",[n._v("$ yum install git-core")])]),o("ul",[o("li",[n._v("检查是否安装成功")])]),o("p",[o("code",[n._v("$ git --version")])]),o("p",[n._v("成功输出版本信息即安装成功，是不是很简单。当然也可以选择用"),o("a",{attrs:{href:"https://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git#%E4%BB%8E%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"}},[n._v("源码安装")]),n._v(".")]),o("h2",{attrs:{id:"安装nginx"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx","aria-hidden":"true"}},[n._v("#")]),n._v(" 安装Nginx")]),o("p",[n._v("nginx是一个异步框架的Web服务器，也可以用作反向代理，负载平衡器和HTTP缓存，得到广泛的使用。当然nodjs也是可以作为独立服务器运行，并且实现反向代理等功能。")]),o("ul",[o("li",[n._v("使用yum进行安装")])]),o("p",[o("code",[n._v("$ yum install nginx")])]),o("ul",[o("li",[o("p",[n._v("\b启动nginx\n"),o("code",[n._v("$ service nginx start")])]),o("ul",[o("li",[n._v("其他一些命令：\n"),o("ul",[o("li",[n._v("停止："),o("code",[n._v("$ service nginx stop")])]),o("li",[n._v("重启："),o("code",[n._v("$ service nginx restart")])]),o("li",[n._v("检查nginx配置文件："),o("code",[n._v("$ nginx -t")])])])])])]),o("li",[o("p",[n._v("\b\b检查是否安装成功\n到自己机器的浏览器输入服务器的ip，成功显示nginx默认页面即表示安装成功了")]),o("ul",[o("li",[n._v("如果不能成功访问，检查默认的80端口是否有开放；如是阿里与服务器，需要到安全组里配置80端口。")])])]),o("li",[o("p",[n._v("配置反向代理\n有了反向代理，可以很轻松实现不同的域名指向不同的服务。\n如：机器同时启动了前端服务(mobile.example.com)、管理端服务(admin.example.com)、api服务(api.example.com)、Jenkins(jenkins.eample.com)等的时候，我们通过配置不同的域名，在nginx配置里面监听80端口，根据不同的域名实现请求转发。")]),o("ul",[o("li",[n._v("简单添加配置")])]),o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[n._v("# 修改/etc/nginx/nginx.conf，在server同级的地方添加配置\n...\n  server {\n      listen       80;\n      server_name  mobile.example.com;\n      location / {\n          proxy_pass http://127.0.0.1:3001;\n      }\n  }\n  server {\n      listen       80;\n      server_name  admin.example.com;\n      location / {\n          proxy_pass http://127.0.0.1:3002;\n      }\n  }\n  server {\n      listen       80;\n      server_name  api.example.com;\n      location / {\n          proxy_pass http://127.0.0.1:3003;\n      }\n  }\n...\n")])]),o("ul",[o("li",[n._v("保存配置后使用"),o("code",[n._v("nginx -t")]),n._v("进行检查配置文件是否正确")]),o("li",[n._v("使用"),o("code",[n._v("service nginx restart")]),n._v("重启")]),o("li",[n._v("重启成功后，通过访问对应的域名既可请求对应的服务了；域名解析需要到对应的域名提供商那里设置。下面截图是阿里云里的域名解析设置。\n"),o("img",{attrs:{src:t(50),alt:"domain_config"}})])])])])])}],r=t(0),i=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},o,!1,null,null,null);e.default=i.exports}}]);